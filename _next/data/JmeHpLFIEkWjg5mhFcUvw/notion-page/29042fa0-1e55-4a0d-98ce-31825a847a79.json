{"pageProps":{"recordMap":{"block":{"29042fa0-1e55-4a0d-98ce-31825a847a79":{"role":"reader","value":{"id":"29042fa0-1e55-4a0d-98ce-31825a847a79","version":415,"type":"page","properties":{"=EkA":[["The new Bridge-2 allocation is available for our group to run the HPC jobs. Here I summarize what we should know before starting anything."]],"BpIl":[["specfem,Parallel Computing"]],"|o[w":[["HPC"]],"title":[["Ideas on running FWI in Bridge-2"]]},"content":["0df286e3-51f8-4b3c-b808-86b1ffcdede7","49bec3d5-91a9-438e-9d2e-cdbc57a5cfed","8a47a354-8644-473e-8e53-c084809ba95e","8a5ad40e-eaae-4c75-8f42-666503e38631","d8321b68-681d-4acc-97f0-8dd266768b3c","ee8cc448-934b-4170-9165-9f3872011f21","6eb89447-00b0-4739-9085-5d5bbe29dcf4","1d099bdb-8dbe-48b7-9a7e-478788db5797","f2510abb-52af-40c9-8777-72f3f43e6d63","69024866-f1f2-4ae1-8194-376c8b38241e","0806fe45-d077-4229-86a2-323a8f295d54","13f072bc-f442-4d37-aff5-b4695f7245db","6d5658e9-eb70-4384-82c4-6f17dab7e1ea","41295ed6-3ce0-4502-8d17-3542a1bf8515","d2bcd54a-a017-477a-bdca-d4038e446cb1","33c5e30d-00d7-4343-b95c-2b8db4bc1994","eeefc664-8b21-45ab-8279-c772ddf695fb","00ddf799-10dd-445a-8bdc-12558fd4becd","7bb89e5b-e688-4081-ba35-8d6994c33a28"],"created_time":1625083320000,"last_edited_time":1625160900000,"parent_id":"64d14807-6d76-4cab-808b-1ac3a358dcbb","parent_table":"collection","alive":true,"created_by_table":"notion_user","created_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","last_edited_by_table":"notion_user","last_edited_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","space_id":"05f80ef1-fcad-4982-9333-06f8429a89d1"}},"20dbf2b0-c90c-4d30-9f41-0abd48835ad0":{"role":"reader","value":{"id":"20dbf2b0-c90c-4d30-9f41-0abd48835ad0","version":40,"type":"collection_view","view_ids":["34dde640-d6fc-4b58-951a-686c32a9031d"],"collection_id":"64d14807-6d76-4cab-808b-1ac3a358dcbb","format":{"collection_pointer":{"id":"64d14807-6d76-4cab-808b-1ac3a358dcbb","table":"collection","spaceId":"05f80ef1-fcad-4982-9333-06f8429a89d1"}},"created_time":1616888242000,"last_edited_time":1625083320000,"parent_id":"ab370d5a-ef57-44a1-8db5-d1bf0ef56f52","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","last_edited_by_table":"notion_user","last_edited_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","space_id":"05f80ef1-fcad-4982-9333-06f8429a89d1"}},"ab370d5a-ef57-44a1-8db5-d1bf0ef56f52":{"role":"reader","value":{"id":"ab370d5a-ef57-44a1-8db5-d1bf0ef56f52","version":43,"type":"page","properties":{"title":[["Blog"]]},"content":["0c56f418-3c4b-4266-8a09-f07f32a04f54","76e9002e-ec7a-4290-9c35-cf696f933b02","04d1ba9f-4745-4da5-a6d3-0336d915f5a2","20dbf2b0-c90c-4d30-9f41-0abd48835ad0","cd00a1df-25fa-4405-832d-b92deed72e20","8b2658c9-927f-49e7-be74-e0e64c07dea5","a7863387-8831-4ba4-ad9d-b78d408890b2"],"format":{"page_font":"serif","page_small_text":false},"permissions":[{"role":"editor","type":"user_permission","user_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e"},{"role":"reader","type":"public_permission"}],"created_time":1616888160000,"last_edited_time":1616891400000,"parent_id":"05f80ef1-fcad-4982-9333-06f8429a89d1","parent_table":"space","alive":true,"created_by_table":"notion_user","created_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","last_edited_by_table":"notion_user","last_edited_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","space_id":"05f80ef1-fcad-4982-9333-06f8429a89d1"}},"0df286e3-51f8-4b3c-b808-86b1ffcdede7":{"role":"reader","value":{"id":"0df286e3-51f8-4b3c-b808-86b1ffcdede7","version":629,"type":"text","properties":{"title":[["Our group is granted 3,800,000 CPU SUs (core hours) in the PSC's new Bridge-2 high performance computer. It is equal to 80,000 SUs measured on stampede2, still a very large amount of resources. Theoretically in developing the model EARA2021, I use around 3,000 SUs for one iteration. So 80,000 SUs can support to run 26 iterations. So I looked at the document of the Bridge-2, and take some notes here."]]},"created_time":1625093940000,"last_edited_time":1625094300000,"parent_id":"29042fa0-1e55-4a0d-98ce-31825a847a79","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","last_edited_by_table":"notion_user","last_edited_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","space_id":"05f80ef1-fcad-4982-9333-06f8429a89d1"}},"49bec3d5-91a9-438e-9d2e-cdbc57a5cfed":{"role":"reader","value":{"id":"49bec3d5-91a9-438e-9d2e-cdbc57a5cfed","version":38,"type":"sub_header","properties":{"title":[["1. The compilers."]]},"created_time":1625094308914,"last_edited_time":1625094300000,"parent_id":"29042fa0-1e55-4a0d-98ce-31825a847a79","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","last_edited_by_table":"notion_user","last_edited_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","space_id":"05f80ef1-fcad-4982-9333-06f8429a89d1"}},"8a47a354-8644-473e-8e53-c084809ba95e":{"role":"reader","value":{"id":"8a47a354-8644-473e-8e53-c084809ba95e","version":795,"type":"text","properties":{"title":[["For the CPU nodes, we can use gcc, icc, or aocc (AMD clang compiler) to compile our code. Since I am planning to run the MPI job, there are choices for the intel-mpi and openmp. As Bridge-2 is using the AMD CPU, it seems that using aocc should be better choice. However, when I check if there is any associated MPI with aocc, I haven't found anything there. There is an openmp for clang2.1. I will test if it works and update in the future. "]]},"created_time":1625094300000,"last_edited_time":1625095260000,"parent_id":"29042fa0-1e55-4a0d-98ce-31825a847a79","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","last_edited_by_table":"notion_user","last_edited_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","space_id":"05f80ef1-fcad-4982-9333-06f8429a89d1"}},"8a5ad40e-eaae-4c75-8f42-666503e38631":{"role":"reader","value":{"id":"8a5ad40e-eaae-4c75-8f42-666503e38631","version":36,"type":"text","created_time":1625095080000,"last_edited_time":1625095080000,"parent_id":"29042fa0-1e55-4a0d-98ce-31825a847a79","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","last_edited_by_table":"notion_user","last_edited_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","space_id":"05f80ef1-fcad-4982-9333-06f8429a89d1"}},"d8321b68-681d-4acc-97f0-8dd266768b3c":{"role":"reader","value":{"id":"d8321b68-681d-4acc-97f0-8dd266768b3c","version":269,"type":"text","properties":{"title":[["Another way is to directly use the intel compilers. The only concern here is that if the intel compiler can run as fast as aocc in an AMD CPU. Anyway, the correct way to load the intel compilers is:"]]},"created_time":1625095080000,"last_edited_time":1625095140000,"parent_id":"29042fa0-1e55-4a0d-98ce-31825a847a79","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","last_edited_by_table":"notion_user","last_edited_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","space_id":"05f80ef1-fcad-4982-9333-06f8429a89d1"}},"ee8cc448-934b-4170-9165-9f3872011f21":{"role":"reader","value":{"id":"ee8cc448-934b-4170-9165-9f3872011f21","version":15,"type":"code","properties":{"title":[["module load intel/20.4 intelmpi/20.4-intel20"]],"language":[["Shell"]]},"format":{"code_wrap":false},"created_time":1625095185349,"last_edited_time":1625095320000,"parent_id":"29042fa0-1e55-4a0d-98ce-31825a847a79","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","last_edited_by_table":"notion_user","last_edited_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","space_id":"05f80ef1-fcad-4982-9333-06f8429a89d1"}},"6eb89447-00b0-4739-9085-5d5bbe29dcf4":{"role":"reader","value":{"id":"6eb89447-00b0-4739-9085-5d5bbe29dcf4","version":15,"type":"text","created_time":1625095680000,"last_edited_time":1625095680000,"parent_id":"29042fa0-1e55-4a0d-98ce-31825a847a79","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","last_edited_by_table":"notion_user","last_edited_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","space_id":"05f80ef1-fcad-4982-9333-06f8429a89d1"}},"1d099bdb-8dbe-48b7-9a7e-478788db5797":{"role":"reader","value":{"id":"1d099bdb-8dbe-48b7-9a7e-478788db5797","version":26,"type":"sub_header","properties":{"title":[["2. The softwares."]]},"created_time":1625095700196,"last_edited_time":1625095680000,"parent_id":"29042fa0-1e55-4a0d-98ce-31825a847a79","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","last_edited_by_table":"notion_user","last_edited_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","space_id":"05f80ef1-fcad-4982-9333-06f8429a89d1"}},"f2510abb-52af-40c9-8777-72f3f43e6d63":{"role":"reader","value":{"id":"f2510abb-52af-40c9-8777-72f3f43e6d63","version":446,"type":"text","properties":{"title":[["I tried the anaconda3 by loading the corresponding module, and find it works as expected. The only difference with installing anaconda3 by ourselves is about activating the new environment. Instead of "],["conda activate",[["_"]]],[" , we should use "],["source activate",[["_"]]],[" instead."]]},"created_time":1625095680000,"last_edited_time":1625095860000,"parent_id":"29042fa0-1e55-4a0d-98ce-31825a847a79","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","last_edited_by_table":"notion_user","last_edited_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","space_id":"05f80ef1-fcad-4982-9333-06f8429a89d1"}},"69024866-f1f2-4ae1-8194-376c8b38241e":{"role":"reader","value":{"id":"69024866-f1f2-4ae1-8194-376c8b38241e","version":16,"type":"text","created_time":1625095860000,"last_edited_time":1625095860000,"parent_id":"29042fa0-1e55-4a0d-98ce-31825a847a79","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","last_edited_by_table":"notion_user","last_edited_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","space_id":"05f80ef1-fcad-4982-9333-06f8429a89d1"}},"0806fe45-d077-4229-86a2-323a8f295d54":{"role":"reader","value":{"id":"0806fe45-d077-4229-86a2-323a8f295d54","version":530,"type":"text","properties":{"title":[["It is not surprising Bridge-2 supports the singularity. It might be good to build a docker image for some programs, such as the one that interpolates the Specfem3D globe's mesh to the Netcdf file with the even spacing grids. This program is written in Julia, which not so many people know how to use it. Using the docker image, with the MPI support, can help others in using my code. "]]},"created_time":1625095860000,"last_edited_time":1625096040000,"parent_id":"29042fa0-1e55-4a0d-98ce-31825a847a79","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","last_edited_by_table":"notion_user","last_edited_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","space_id":"05f80ef1-fcad-4982-9333-06f8429a89d1"}},"13f072bc-f442-4d37-aff5-b4695f7245db":{"role":"reader","value":{"id":"13f072bc-f442-4d37-aff5-b4695f7245db","version":16,"type":"text","created_time":1625096220000,"last_edited_time":1625096220000,"parent_id":"29042fa0-1e55-4a0d-98ce-31825a847a79","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","last_edited_by_table":"notion_user","last_edited_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","space_id":"05f80ef1-fcad-4982-9333-06f8429a89d1"}},"6d5658e9-eb70-4384-82c4-6f17dab7e1ea":{"role":"reader","value":{"id":"6d5658e9-eb70-4384-82c4-6f17dab7e1ea","version":589,"type":"text","properties":{"title":[["One of the most interesting feature in Bridge-2 is that it can run the Jupyter notebook in the browser. And it also supports IJulia. The ideal scenario is to combine with the GPU node or just run the code in parallel. Our group is granted 2,000 SUs for the GPU, and it seems no one else will try to use them (I am always the only one interested in the technique). If the waiting time is not that long, it might be a good alternative to ICER?   "]]},"created_time":1625096220000,"last_edited_time":1625096460000,"parent_id":"29042fa0-1e55-4a0d-98ce-31825a847a79","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","last_edited_by_table":"notion_user","last_edited_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","space_id":"05f80ef1-fcad-4982-9333-06f8429a89d1"}},"41295ed6-3ce0-4502-8d17-3542a1bf8515":{"role":"reader","value":{"id":"41295ed6-3ce0-4502-8d17-3542a1bf8515","version":18,"type":"text","created_time":1625096040000,"last_edited_time":1625096100000,"parent_id":"29042fa0-1e55-4a0d-98ce-31825a847a79","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","last_edited_by_table":"notion_user","last_edited_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","space_id":"05f80ef1-fcad-4982-9333-06f8429a89d1"}},"d2bcd54a-a017-477a-bdca-d4038e446cb1":{"role":"reader","value":{"id":"d2bcd54a-a017-477a-bdca-d4038e446cb1","version":37,"type":"sub_header","properties":{"title":[["3.  The Disks."]]},"created_time":1625096106912,"last_edited_time":1625096100000,"parent_id":"29042fa0-1e55-4a0d-98ce-31825a847a79","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","last_edited_by_table":"notion_user","last_edited_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","space_id":"05f80ef1-fcad-4982-9333-06f8429a89d1"}},"33c5e30d-00d7-4343-b95c-2b8db4bc1994":{"role":"reader","value":{"id":"33c5e30d-00d7-4343-b95c-2b8db4bc1994","version":1096,"type":"text","properties":{"title":[["The Bridge-2 doesn't have the scratch directory like other super computers, it only has the so-called the local directory, even they call it as the \"scratch\". It is the most disappointed part. I might have to modify my workflow. For the FWI inversion, although I can store the mesh files into the local directories, there are still some problems. For example, If I use three nodes to run the simulation for one event, in which node should I store my mesh files? This setting should be configured in the compilation part, which means I have to put the Specfem compilation into the computing, as I will only know the local directory in the computing. It is very dangerous as its compilation will always have the internal error, caused by the parallel compilation. "]]},"created_time":1625096100000,"last_edited_time":1625097060000,"parent_id":"29042fa0-1e55-4a0d-98ce-31825a847a79","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","last_edited_by_table":"notion_user","last_edited_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","space_id":"05f80ef1-fcad-4982-9333-06f8429a89d1"}},"eeefc664-8b21-45ab-8279-c772ddf695fb":{"role":"reader","value":{"id":"eeefc664-8b21-45ab-8279-c772ddf695fb","version":16,"type":"text","created_time":1625097060000,"last_edited_time":1625097060000,"parent_id":"29042fa0-1e55-4a0d-98ce-31825a847a79","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","last_edited_by_table":"notion_user","last_edited_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","space_id":"05f80ef1-fcad-4982-9333-06f8429a89d1"}},"00ddf799-10dd-445a-8bdc-12558fd4becd":{"role":"reader","value":{"id":"00ddf799-10dd-445a-8bdc-12558fd4becd","version":32,"type":"sub_header","properties":{"title":[["4. The memory."]]},"created_time":1625097122129,"last_edited_time":1625097420000,"parent_id":"29042fa0-1e55-4a0d-98ce-31825a847a79","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","last_edited_by_table":"notion_user","last_edited_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","space_id":"05f80ef1-fcad-4982-9333-06f8429a89d1"}},"7bb89e5b-e688-4081-ba35-8d6994c33a28":{"role":"reader","value":{"id":"7bb89e5b-e688-4081-ba35-8d6994c33a28","version":434,"type":"text","properties":{"title":[["For each node, the Bridge-2 has 256GB memory. Since there are 128 cores for each node, each core will have 2GB memory in average. Although this is enough to develop the models like EARA2021. However, it is too small for running the larger jobs. It means I will have to use fewer cores per node to avoid the out-of-memory error.  "]]},"created_time":1625097120000,"last_edited_time":1625160900000,"parent_id":"29042fa0-1e55-4a0d-98ce-31825a847a79","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","last_edited_by_table":"notion_user","last_edited_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","space_id":"05f80ef1-fcad-4982-9333-06f8429a89d1"}}},"collection":{"64d14807-6d76-4cab-808b-1ac3a358dcbb":{"role":"reader","value":{"id":"64d14807-6d76-4cab-808b-1ac3a358dcbb","version":30,"name":[["2021"]],"schema":{"=EkA":{"name":"Abstract","type":"text"},"BpIl":{"name":"Tags","type":"multi_select","options":[{"id":"98a78b5f-f6ea-4b8f-bb3b-49bd3761bdae","color":"brown","value":"front end"},{"id":"3e797377-43a5-442d-a079-650b0123fe0a","color":"pink","value":"typescript"},{"id":"7b9b6115-96d5-40f2-b04f-74f7be002947","color":"orange","value":"next.js"},{"id":"45d8b453-1a5e-4405-8bd5-7d081cdc7a6c","color":"blue","value":"specfem"},{"id":"bc880b7a-5143-4c98-8f80-9f5a9570d2d9","color":"gray","value":"stampede2"},{"id":"7c35f5e1-7372-4f8e-93e0-bb74a5c3fa5d","color":"yellow","value":"cmake"},{"id":"a5eb2d23-b64d-484e-b5b7-2d10c77d7231","color":"default","value":"HDF5"},{"id":"e0f8d0f7-8479-4c08-a1cf-d58cf1f5c97c","color":"green","value":"Parallel Computing"}]},"J@xT":{"name":"Last edited time","type":"last_edited_time"},"|o[w":{"name":"Category","type":"select","options":[{"id":"ThgN","value":"CS"},{"id":"6134b7ea-a30a-41e5-8bbd-1731a91ee334","color":"gray","value":"Specfem"},{"id":"785c2a3c-9a34-4a62-95bf-e95c90a69e87","color":"default","value":"HPC"}]},"title":{"name":"Name","type":"title"}},"format":{"collection_page_properties":[{"visible":true,"property":"BpIl"}]},"parent_id":"20dbf2b0-c90c-4d30-9f41-0abd48835ad0","parent_table":"block","alive":true,"migrated":true,"space_id":"05f80ef1-fcad-4982-9333-06f8429a89d1"}}},"collection_view":{"34dde640-d6fc-4b58-951a-686c32a9031d":{"role":"reader","value":{"id":"34dde640-d6fc-4b58-951a-686c32a9031d","version":42,"type":"table","name":"Default view","format":{"table_wrap":true,"table_properties":[{"width":269,"visible":true,"property":"title"},{"width":100,"visible":true,"property":"|o[w"},{"width":270,"visible":true,"property":"BpIl"},{"width":202,"visible":true,"property":"J@xT"},{"visible":true,"property":"=EkA"}]},"parent_id":"20dbf2b0-c90c-4d30-9f41-0abd48835ad0","parent_table":"block","alive":true,"page_sort":["7b868910-8732-4b19-a22b-85ccd35cecdd","ed4ff7cf-35db-46fd-ba49-04e7b76b047c","bf5005e7-7d64-4ee9-a362-1a53a404918b","285c4017-568b-4f63-bb1a-1c0bd0a9a709","357433d8-f0a1-48bf-aea0-004c15b47b2b","29042fa0-1e55-4a0d-98ce-31825a847a79","9624cbbe-068b-4fc0-ae9f-1d91629339a0","a57b5a1b-81aa-4a65-931a-2159f3344a69","22f2c28f-ec70-4e30-9055-9a2fe764f2d7","c3853aff-1d78-4a75-9970-d4cf53cf26b2"],"query2":{"aggregations":[{"property":"title","aggregator":"count"}]},"space_id":"05f80ef1-fcad-4982-9333-06f8429a89d1"}}},"space":{},"notion_user":{},"collection_query":{},"signed_urls":{}}},"__N_SSG":true}