{"pageProps":{"recordMap":{"block":{"ab370d5a-ef57-44a1-8db5-d1bf0ef56f52":{"role":"reader","value":{"id":"ab370d5a-ef57-44a1-8db5-d1bf0ef56f52","version":43,"type":"page","properties":{"title":[["Blog"]]},"content":["0c56f418-3c4b-4266-8a09-f07f32a04f54","76e9002e-ec7a-4290-9c35-cf696f933b02","04d1ba9f-4745-4da5-a6d3-0336d915f5a2","20dbf2b0-c90c-4d30-9f41-0abd48835ad0","cd00a1df-25fa-4405-832d-b92deed72e20","8b2658c9-927f-49e7-be74-e0e64c07dea5","a7863387-8831-4ba4-ad9d-b78d408890b2"],"format":{"page_font":"serif","page_small_text":false},"permissions":[{"role":"editor","type":"user_permission","user_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e"},{"role":"reader","type":"public_permission"}],"created_time":1616888160000,"last_edited_time":1616891400000,"parent_id":"05f80ef1-fcad-4982-9333-06f8429a89d1","parent_table":"space","alive":true,"created_by_table":"notion_user","created_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","last_edited_by_table":"notion_user","last_edited_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","space_id":"05f80ef1-fcad-4982-9333-06f8429a89d1"}},"0c56f418-3c4b-4266-8a09-f07f32a04f54":{"role":"reader","value":{"id":"0c56f418-3c4b-4266-8a09-f07f32a04f54","version":8,"type":"text","created_time":1616888160000,"last_edited_time":1616888160000,"parent_id":"ab370d5a-ef57-44a1-8db5-d1bf0ef56f52","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","last_edited_by_table":"notion_user","last_edited_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","space_id":"05f80ef1-fcad-4982-9333-06f8429a89d1"}},"76e9002e-ec7a-4290-9c35-cf696f933b02":{"role":"reader","value":{"id":"76e9002e-ec7a-4290-9c35-cf696f933b02","version":3,"type":"sub_sub_header","properties":{"title":[["Share Ideas, Document Solutions.",[["h","teal"]]]]},"created_time":1616888225186,"last_edited_time":1616888220000,"parent_id":"ab370d5a-ef57-44a1-8db5-d1bf0ef56f52","parent_table":"block","alive":true,"copied_from":"0b23552f-cfcb-4109-a0bb-7238b098ea0a","created_by_table":"notion_user","created_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","last_edited_by_table":"notion_user","last_edited_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","space_id":"05f80ef1-fcad-4982-9333-06f8429a89d1"}},"04d1ba9f-4745-4da5-a6d3-0336d915f5a2":{"role":"reader","value":{"id":"04d1ba9f-4745-4da5-a6d3-0336d915f5a2","version":10,"type":"text","created_time":1616888220000,"last_edited_time":1616888220000,"parent_id":"ab370d5a-ef57-44a1-8db5-d1bf0ef56f52","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","last_edited_by_table":"notion_user","last_edited_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","space_id":"05f80ef1-fcad-4982-9333-06f8429a89d1"}},"20dbf2b0-c90c-4d30-9f41-0abd48835ad0":{"role":"reader","value":{"id":"20dbf2b0-c90c-4d30-9f41-0abd48835ad0","version":36,"type":"collection_view","view_ids":["34dde640-d6fc-4b58-951a-686c32a9031d"],"collection_id":"64d14807-6d76-4cab-808b-1ac3a358dcbb","created_time":1616888242000,"last_edited_time":1619140620000,"parent_id":"ab370d5a-ef57-44a1-8db5-d1bf0ef56f52","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","last_edited_by_table":"notion_user","last_edited_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","space_id":"05f80ef1-fcad-4982-9333-06f8429a89d1"}},"cd00a1df-25fa-4405-832d-b92deed72e20":{"role":"reader","value":{"id":"cd00a1df-25fa-4405-832d-b92deed72e20","version":2,"type":"text","created_time":1616888225186,"last_edited_time":1616888220000,"parent_id":"ab370d5a-ef57-44a1-8db5-d1bf0ef56f52","parent_table":"block","alive":true,"copied_from":"65eb0cd4-a626-4faa-aafc-684d5671a449","created_by_table":"notion_user","created_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","last_edited_by_table":"notion_user","last_edited_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","space_id":"05f80ef1-fcad-4982-9333-06f8429a89d1"}},"8b2658c9-927f-49e7-be74-e0e64c07dea5":{"role":"reader","value":{"id":"8b2658c9-927f-49e7-be74-e0e64c07dea5","version":3,"type":"text","properties":{"title":[["✔️ "],["Created using Next.js and React-Notion-X.",[["h","blue"]]]]},"created_time":1616888225186,"last_edited_time":1616888220000,"parent_id":"ab370d5a-ef57-44a1-8db5-d1bf0ef56f52","parent_table":"block","alive":true,"copied_from":"17187cda-f6ca-4664-a509-843a569e0fbf","created_by_table":"notion_user","created_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","last_edited_by_table":"notion_user","last_edited_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","space_id":"05f80ef1-fcad-4982-9333-06f8429a89d1"}},"a7863387-8831-4ba4-ad9d-b78d408890b2":{"role":"reader","value":{"id":"a7863387-8831-4ba4-ad9d-b78d408890b2","version":8,"type":"text","created_time":1616888220000,"last_edited_time":1616888220000,"parent_id":"ab370d5a-ef57-44a1-8db5-d1bf0ef56f52","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","last_edited_by_table":"notion_user","last_edited_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","space_id":"05f80ef1-fcad-4982-9333-06f8429a89d1"}},"7b868910-8732-4b19-a22b-85ccd35cecdd":{"role":"reader","value":{"id":"7b868910-8732-4b19-a22b-85ccd35cecdd","version":74,"type":"page","properties":{"BpIl":[["front end,typescript,next.js"]],"o\\{n":[["CS"]],"|o[w":[["CS"]],"title":[["Technique Detail of this website"]]},"created_time":1616888242000,"last_edited_time":1617069960000,"parent_id":"64d14807-6d76-4cab-808b-1ac3a358dcbb","parent_table":"collection","alive":true,"created_by_table":"notion_user","created_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","last_edited_by_table":"notion_user","last_edited_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","space_id":"05f80ef1-fcad-4982-9333-06f8429a89d1"}},"ed4ff7cf-35db-46fd-ba49-04e7b76b047c":{"role":"reader","value":{"id":"ed4ff7cf-35db-46fd-ba49-04e7b76b047c","version":166,"type":"page","properties":{"BpIl":[["specfem,stampede2,cmake"]],"|o[w":[["Specfem"]],"title":[["Build ASDF library on stampede2 "]]},"content":["24f914ad-e66d-4100-ad05-9253d528d459","0c164339-d2d1-4943-b8f4-8ae320795800","3ce872a2-0225-411a-9cfb-8056574e7ffa","d29740f1-efcc-4cd1-b4c6-5d2df29a88cc","14343a0b-7564-4ddc-a2fd-8545553dafcc","bfbf6623-e5a2-4394-ade0-05e850bb6233","519d807a-7f11-4326-9a32-b5a601626a29","b5965324-01d0-4e17-828b-c7a179b14506","af6d7a91-5352-4d85-8837-9fa9b9b63a00","036ab45a-1442-417d-b480-5f1cd6fec8f9","5a943a98-5cd4-453f-80fd-2c7308396113","56e3eb61-74df-4d00-866c-5a79bcc06a9e"],"created_time":1619130540000,"last_edited_time":1619131620000,"parent_id":"64d14807-6d76-4cab-808b-1ac3a358dcbb","parent_table":"collection","alive":true,"created_by_table":"notion_user","created_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","last_edited_by_table":"notion_user","last_edited_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","space_id":"05f80ef1-fcad-4982-9333-06f8429a89d1"}},"bf5005e7-7d64-4ee9-a362-1a53a404918b":{"role":"reader","value":{"id":"bf5005e7-7d64-4ee9-a362-1a53a404918b","version":69,"type":"page","properties":{"BpIl":[["specfem,stampede2,cmake"]],"|o[w":[["Specfem"]],"title":[["Build ADIOS2 library on stampede2"]]},"content":["63c112af-07b5-4d58-8ea3-e942b52f31d2","2dcb3c44-8a72-4ec2-8946-33323288e5b6","ce4c5ec4-5d16-486e-9547-c76c4259f621","7c1475c7-fe0f-4b3d-b014-b68629e755a6"],"created_time":1619133120000,"last_edited_time":1619140620000,"parent_id":"64d14807-6d76-4cab-808b-1ac3a358dcbb","parent_table":"collection","alive":true,"created_by_table":"notion_user","created_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","last_edited_by_table":"notion_user","last_edited_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","space_id":"05f80ef1-fcad-4982-9333-06f8429a89d1"}},"285c4017-568b-4f63-bb1a-1c0bd0a9a709":{"role":"reader","value":{"id":"285c4017-568b-4f63-bb1a-1c0bd0a9a709","version":129,"type":"page","properties":{"BpIl":[["stampede2,specfem"]],"|o[w":[["Specfem"]],"title":[["Compile Specfem3D Globe with ASDF and ADIOS2 on stampede2"]]},"content":["005f1073-73f2-404d-a63b-9c5ec083d9af","4aa9eb1c-14df-4254-9348-7fd61cfc3cf4","8d5ae5a6-70cb-4e0a-b03b-d8a21455435b","c51efa05-13c0-4f30-b16f-71a2e436263b","c5a2b7ae-b326-4e0f-a817-fa4850b5fada","993533ba-0d27-460e-8dd5-d6c03cba1215","8f9b5132-6ab3-4e1f-8baa-928a1a9d6566","5df7a574-6b7d-432d-9ba0-5dae16baf122","6a13d886-86d7-43bd-9a96-f26b0221fdd7","9724776f-62ef-4531-9fd6-7bf869b2325a","a8435c8e-7f81-4d0d-a01a-21ab89312570","0d143ccf-8309-470d-8d79-b58279e575b0"],"created_time":1619140620000,"last_edited_time":1619141640000,"parent_id":"64d14807-6d76-4cab-808b-1ac3a358dcbb","parent_table":"collection","alive":true,"created_by_table":"notion_user","created_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","last_edited_by_table":"notion_user","last_edited_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","space_id":"05f80ef1-fcad-4982-9333-06f8429a89d1"}},"24f914ad-e66d-4100-ad05-9253d528d459":{"role":"reader","value":{"id":"24f914ad-e66d-4100-ad05-9253d528d459","version":257,"type":"text","properties":{"title":[["The package "],["asdf-library",[["a","https://github.com/SeismicData/asdf-library"]]],[" is a library to use the ASDF format to record the seismic data. It is used in Specfem3D to generate the synthetics or read the adjoint sources in ASDF format."]]},"created_time":1619130600000,"last_edited_time":1619130720000,"parent_id":"ed4ff7cf-35db-46fd-ba49-04e7b76b047c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","last_edited_by_table":"notion_user","last_edited_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","space_id":"05f80ef1-fcad-4982-9333-06f8429a89d1"}},"0c164339-d2d1-4943-b8f4-8ae320795800":{"role":"reader","value":{"id":"0c164339-d2d1-4943-b8f4-8ae320795800","version":312,"type":"text","properties":{"title":[["To use this package, we are relying on CMAKE to compile the code. However, there are some problems in CMakeLists.txt. And I have made some corrections and compile it successfully on Stampede2. The following is the corrected one:"]]},"created_time":1619130720000,"last_edited_time":1619131620000,"parent_id":"ed4ff7cf-35db-46fd-ba49-04e7b76b047c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","last_edited_by_table":"notion_user","last_edited_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","space_id":"05f80ef1-fcad-4982-9333-06f8429a89d1"}},"3ce872a2-0225-411a-9cfb-8056574e7ffa":{"role":"reader","value":{"id":"3ce872a2-0225-411a-9cfb-8056574e7ffa","version":12,"type":"code","properties":{"title":[["cmake_minimum_required (VERSION 2.8.7)\n\n############################################################\nproject (ASDF)\n\ninclude(GNUInstallDirs)\n\nset(CMAKE_C_FLAGS_DEBUG \"${CMAKE_C_FLAGS_DEBUG} -Wall -Werror\")\nset(CMAKE_CXX_FLAGS_DEBUG \"${CMAKE_CXX_FLAGS_DEBUG} -Wall -Werror\")\nset(CMAKE_C_FLAGS_RELWITHDEBINFO\n    \"${CMAKE_C_FLAGS_RELWITHDEBINFO} -Wall -Werror\")\nset(CMAKE_CXX_FLAGS_RELWITHDEBINFO\n    \"${CMAKE_CXX_FLAGS_RELWITHDEBINFO} -Wall -Werror\")\n\n############################################################\n### Dependencies                                         ###\n############################################################\n\nfind_package(HDF5 1.8.0 REQUIRED)\ninclude_directories(${HDF5_INCLUDE_DIR})\nfind_package(MPI REQUIRED)\ninclude_directories(${MPI_INCLUDE_PATH})\nfind_package(Boost 1.60 COMPONENTS system)\n# stampede2 boost dir is not standard\ninclude_directories(${Boost_INCLUDE_DIRS})\noption (TEST \"Run unit tests\" OFF)\n\n############################################################\n### Setup directory structure                            ###\n############################################################\ninclude_directories (./inc)\n\nset (CMAKE_LIBRARY_OUTPUT_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR}/lib)  # .so\nset (CMAKE_ARCHIVE_OUTPUT_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR}/lib)  # .a\n\nset (SRC_DIR ${CMAKE_SOURCE_DIR}/src)\n\n############################################################\n### ASDF library                                         ###\n############################################################\nadd_library (asdf\n             ${SRC_DIR}/ASDF_init.c\n             ${SRC_DIR}/ASDF_read.c\n             ${SRC_DIR}/ASDF_write.c\n             ${SRC_DIR}/gen_provenance_id.cpp\n             ${SRC_DIR}/gen_provenance_entity.cpp\n             ${SRC_DIR}/gen_sf_provenance.cpp\n             ${SRC_DIR}/ASDF_f.c)\n\ntarget_link_libraries(asdf\n\t\t      ${HDF5_LIBRARIES} ${MPI_C_LIBRARIES})\n\ninstall(TARGETS asdf\n        LIBRARY DESTINATION ${CMAKE_INSTALL_LIBDIR}\n        ARCHIVE DESTINATION ${CMAKE_INSTALL_LIBDIR})\nfile(GLOB inc_files inc/*.h)\ninstall(FILES ${inc_files}\n        DESTINATION ${CMAKE_INSTALL_INCLUDEDIR})\n\nif (${CMAKE_VERSION} VERSION_GREATER 3.1)\n  set_property(TARGET asdf PROPERTY CXX_STANDARD 11)\nelse()\n  include(CheckCXXCompilerFlag)\n  CHECK_CXX_COMPILER_FLAG(\"-std=c++11\" COMPILER_SUPPORTS_CXX11)\n  CHECK_CXX_COMPILER_FLAG(\"-std=c++0x\" COMPILER_SUPPORTS_CXX0X)\n  if (COMPILER_SUPPORTS_CXX11)\n    SET(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -std=c++11\")\n  elseif (COMPILER_SUPPORTS_CXX0X)\n    SET(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -std=c++0x\")\n  else()\n    message(FATAL_ERROR\n            \"The compiler ${CMAKE_CXX_COMPILER} has no C++11 support. \"\n            \"Please use a different C++ compiler.\")\n  endif()\nendif()\n\n############################################################\n### Documentation Generation                             ###\n############################################################\n# See: https://www.tty1.net/blog/2014/cmake-doxygen_en.html\nfind_package(Doxygen)\noption (BUILD_DOCUMENTATION\n        \"Create and install the HTML based API documentation (requires Doxygen)\"\n        OFF)\n\nif (BUILD_DOCUMENTATION)\n  if (NOT DOXYGEN_FOUND)\n    message (FATAL_ERROR \"Doxygen is needed to build the documentation.\")\n  endif ()\n\n  set (doxyfile_in ${CMAKE_CURRENT_SOURCE_DIR}/Doxyfile.in)\n  set (doxyfile ${CMAKE_BINARY_DIR}/Doxyfile)\n\n  configure_file(${doxyfile_in} ${doxyfile} @ONLY)\n\n  add_custom_target (doc\n      command ${DOXYGEN_EXECUTABLE} ${doxyfile}\n      WORKING_DIRECTORY ${CMAKE_SOURCE_DIR}\n      COMMENT \"Generating API documentation with Doxygen\"\n      VERBATIM)\n\n  install(DIRECTORY ${CMAKE_BINARY_DIR}/doc/html\n          DESTINATION ${CMAKE_INSTALL_DOCDIR})\nendif()\n\ninstall(FILES README.md\n        DESTINATION ${CMAKE_INSTALL_DOCDIR})\n\n############################################################\nif (TEST)\n  include(CTest)  # enable_testing() is not enough to 'make test'\n  add_subdirectory(test)\nendif()\nadd_subdirectory(examples)"]],"language":[["Plain Text"]]},"created_time":1619130871233,"last_edited_time":1619130900000,"parent_id":"ed4ff7cf-35db-46fd-ba49-04e7b76b047c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","last_edited_by_table":"notion_user","last_edited_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","space_id":"05f80ef1-fcad-4982-9333-06f8429a89d1"}},"d29740f1-efcc-4cd1-b4c6-5d2df29a88cc":{"role":"reader","value":{"id":"d29740f1-efcc-4cd1-b4c6-5d2df29a88cc","version":92,"type":"text","properties":{"title":[["I have made the corrections in the following parts:"]]},"created_time":1619130900000,"last_edited_time":1619130960000,"parent_id":"ed4ff7cf-35db-46fd-ba49-04e7b76b047c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","last_edited_by_table":"notion_user","last_edited_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","space_id":"05f80ef1-fcad-4982-9333-06f8429a89d1"}},"14343a0b-7564-4ddc-a2fd-8545553dafcc":{"role":"reader","value":{"id":"14343a0b-7564-4ddc-a2fd-8545553dafcc","version":89,"type":"bulleted_list","properties":{"title":[["Find the Boost package."]]},"content":["28d96c71-dd1b-45aa-9605-f18530ff759e"],"created_time":1619130960000,"last_edited_time":1619131020000,"parent_id":"ed4ff7cf-35db-46fd-ba49-04e7b76b047c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","last_edited_by_table":"notion_user","last_edited_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","space_id":"05f80ef1-fcad-4982-9333-06f8429a89d1"}},"bfbf6623-e5a2-4394-ade0-05e850bb6233":{"role":"reader","value":{"id":"bfbf6623-e5a2-4394-ade0-05e850bb6233","version":140,"type":"bulleted_list","properties":{"title":[["Disable the document building. "]]},"content":["af89a671-1043-4a4a-a0d4-d5549dd6eebf"],"created_time":1619131020000,"last_edited_time":1619131620000,"parent_id":"ed4ff7cf-35db-46fd-ba49-04e7b76b047c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","last_edited_by_table":"notion_user","last_edited_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","space_id":"05f80ef1-fcad-4982-9333-06f8429a89d1"}},"036ab45a-1442-417d-b480-5f1cd6fec8f9":{"role":"reader","value":{"id":"036ab45a-1442-417d-b480-5f1cd6fec8f9","version":77,"type":"code","properties":{"title":[["module load phdf5/1.10.4 boost/1.68\nmkdir build\ncd build\nCC=icc CXX=icpc FC=mpif90 cmake -DCMAKE_INSTALL_PREFIX=/scratch/05880/tg851791/libs/asdf ..\ncmake --build . --target install"]],"language":[["Shell"]]},"created_time":1619131195702,"last_edited_time":1619131200000,"parent_id":"ed4ff7cf-35db-46fd-ba49-04e7b76b047c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","last_edited_by_table":"notion_user","last_edited_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","space_id":"05f80ef1-fcad-4982-9333-06f8429a89d1"}},"5a943a98-5cd4-453f-80fd-2c7308396113":{"role":"reader","value":{"id":"5a943a98-5cd4-453f-80fd-2c7308396113","version":97,"type":"text","properties":{"title":[["Here I set the installation directory via "],["DCMAKE_INSTALL_PREFIX",[["_"]]]]},"created_time":1619131200000,"last_edited_time":1619131320000,"parent_id":"ed4ff7cf-35db-46fd-ba49-04e7b76b047c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","last_edited_by_table":"notion_user","last_edited_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","space_id":"05f80ef1-fcad-4982-9333-06f8429a89d1"}},"56e3eb61-74df-4d00-866c-5a79bcc06a9e":{"role":"reader","value":{"id":"56e3eb61-74df-4d00-866c-5a79bcc06a9e","version":8,"type":"text","created_time":1619131320000,"last_edited_time":1619131320000,"parent_id":"ed4ff7cf-35db-46fd-ba49-04e7b76b047c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","last_edited_by_table":"notion_user","last_edited_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","space_id":"05f80ef1-fcad-4982-9333-06f8429a89d1"}},"63c112af-07b5-4d58-8ea3-e942b52f31d2":{"role":"reader","value":{"id":"63c112af-07b5-4d58-8ea3-e942b52f31d2","version":413,"type":"text","properties":{"title":[["ADIOS2",[["a","https://github.com/ornladios/ADIOS2"]]],[" is a package to store large scientific dataset. Specfem uses ADIOS2 as an option to store the mesh files. Meanwhile, ADIOS2 has also provided friendly python API and avoid generating lots of small files. Here I am following the document to compile the package on Stampede2."]]},"created_time":1619133180000,"last_edited_time":1619133300000,"parent_id":"bf5005e7-7d64-4ee9-a362-1a53a404918b","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","last_edited_by_table":"notion_user","last_edited_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","space_id":"05f80ef1-fcad-4982-9333-06f8429a89d1"}},"2dcb3c44-8a72-4ec2-8946-33323288e5b6":{"role":"reader","value":{"id":"2dcb3c44-8a72-4ec2-8946-33323288e5b6","version":99,"type":"code","properties":{"title":[["wget https://github.com/ornladios/ADIOS2/archive/refs/tags/v2.6.0.tar.gz\ntar xvf v2.6.0.tar.gz\ncd ADIOS2-2.6.0\nmkdir build\ncd build\nmodule load phdf5/1.10.4 # not necessary\nCC=icc CXX=icpc FC=mpif90 cmake -DADIOS2_USE_Fortran=ON -DADIOS2_USE_Python=OFF -DCMAKE_INSTALL_PREFIX=/scratch/05880/tg851791/libs/adios2 ..\ncmake --build . --target install -j 48"]],"language":[["Shell"]]},"created_time":1619133404089,"last_edited_time":1619140560000,"parent_id":"bf5005e7-7d64-4ee9-a362-1a53a404918b","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","last_edited_by_table":"notion_user","last_edited_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","space_id":"05f80ef1-fcad-4982-9333-06f8429a89d1"}},"7c1475c7-fe0f-4b3d-b014-b68629e755a6":{"role":"reader","value":{"id":"7c1475c7-fe0f-4b3d-b014-b68629e755a6","version":242,"type":"text","properties":{"title":[["Note: currently Specfem3D globe doesn't support the newest version, and xspecfem3D will crash for the newer version. V2.6.0 has been tested and is recommended to use."]]},"created_time":1619133420000,"last_edited_time":1619140620000,"parent_id":"bf5005e7-7d64-4ee9-a362-1a53a404918b","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","last_edited_by_table":"notion_user","last_edited_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","space_id":"05f80ef1-fcad-4982-9333-06f8429a89d1"}},"005f1073-73f2-404d-a63b-9c5ec083d9af":{"role":"reader","value":{"id":"005f1073-73f2-404d-a63b-9c5ec083d9af","version":190,"type":"text","properties":{"title":[["Here I introduce how I compile Specfem3D Globe on Stampede2 with the ASDF and the ADIOS2 support."]]},"created_time":1619140680000,"last_edited_time":1619140740000,"parent_id":"285c4017-568b-4f63-bb1a-1c0bd0a9a709","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","last_edited_by_table":"notion_user","last_edited_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","space_id":"05f80ef1-fcad-4982-9333-06f8429a89d1"}},"4aa9eb1c-14df-4254-9348-7fd61cfc3cf4":{"role":"reader","value":{"id":"4aa9eb1c-14df-4254-9348-7fd61cfc3cf4","version":463,"type":"text","properties":{"title":[["The first step is to download the source. It's recommended to use the newer version, with more bug fixed and advanced functionality.  Here I am using my maintained version, with the supporting of the boundary kernel inversion and some other 1D models. (It tracks the main development branch) "]]},"created_time":1619140740000,"last_edited_time":1619140920000,"parent_id":"285c4017-568b-4f63-bb1a-1c0bd0a9a709","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","last_edited_by_table":"notion_user","last_edited_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","space_id":"05f80ef1-fcad-4982-9333-06f8429a89d1"}},"8d5ae5a6-70cb-4e0a-b03b-d8a21455435b":{"role":"reader","value":{"id":"8d5ae5a6-70cb-4e0a-b03b-d8a21455435b","version":21,"type":"code","properties":{"title":[["git clone https://github.com/ziyixi/specfem3d_globe"]],"language":[["Shell"]]},"created_time":1619140852567,"last_edited_time":1619140980000,"parent_id":"285c4017-568b-4f63-bb1a-1c0bd0a9a709","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","last_edited_by_table":"notion_user","last_edited_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","space_id":"05f80ef1-fcad-4982-9333-06f8429a89d1"}},"c51efa05-13c0-4f30-b16f-71a2e436263b":{"role":"reader","value":{"id":"c51efa05-13c0-4f30-b16f-71a2e436263b","version":173,"type":"text","properties":{"title":[["And then the flags in Par_file should be modified, an example is:"]]},"created_time":1619140980000,"last_edited_time":1619141040000,"parent_id":"285c4017-568b-4f63-bb1a-1c0bd0a9a709","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","last_edited_by_table":"notion_user","last_edited_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","space_id":"05f80ef1-fcad-4982-9333-06f8429a89d1"}},"c5a2b7ae-b326-4e0f-a817-fa4850b5fada":{"role":"reader","value":{"id":"c5a2b7ae-b326-4e0f-a817-fa4850b5fada","version":13,"type":"code","properties":{"title":[["#-----------------------------------------------------------\n#\n# Simulation input parameters\n#\n#-----------------------------------------------------------\n\n# forward or adjoint simulation\nSIMULATION_TYPE                 = 1   # set to 1 for forward simulations, 2 for adjoint simulations for sources, and 3 for kernel simulations\nNOISE_TOMOGRAPHY                = 0   # flag of noise tomography, three steps (1,2,3). If earthquake simulation, set it to 0.\nSAVE_FORWARD                    = .false.   # save last frame of forward simulation or not\n\n# number of chunks (1,2,3 or 6)\nNCHUNKS                         = 1\n\n# angular width of the first chunk (not used if full sphere with six chunks)\nANGULAR_WIDTH_XI_IN_DEGREES     = 60.d0   # angular size of a chunk\nANGULAR_WIDTH_ETA_IN_DEGREES    = 60.d0\nCENTER_LATITUDE_IN_DEGREES      = 36.d0\nCENTER_LONGITUDE_IN_DEGREES     = 123.d0\nGAMMA_ROTATION_AZIMUTH          = -10.d0\n\n# number of elements at the surface along the two sides of the first chunk\n# (must be multiple of 16 and 8 * multiple of NPROC below)\nNEX_XI                          = 192\nNEX_ETA                         = 192\n\n# number of MPI processors along the two sides of the first chunk\nNPROC_XI                        = 12\nNPROC_ETA                       = 12\n\n#-----------------------------------------------------------\n#\n# Model\n#\n#-----------------------------------------------------------\n\n# 1D models with real structure:\n# 1D_isotropic_prem, 1D_transversely_isotropic_prem, 1D_iasp91, 1D_1066a, 1D_ak135f_no_mud, 1D_ref, 1D_ref_iso, 1D_jp3d,1D_sea99\n#\n# 1D models with only one fictitious averaged crustal layer:\n# 1D_isotropic_prem_onecrust, 1D_transversely_isotropic_prem_onecrust, 1D_iasp91_onecrust, 1D_1066a_onecrust, 1D_ak135f_no_mud_onecrust\n#\n# fully 3D models:\n# transversely_isotropic_prem_plus_3D_crust_2.0, 3D_anisotropic, 3D_attenuation,\n# s20rts, s40rts, s362ani, s362iso, s362wmani, s362ani_prem, s362ani_3DQ, s362iso_3DQ,\n# s29ea, sea99_jp3d1994, sea99, jp3d1994, heterogen, full_sh, sgloberani_aniso, sgloberani_iso\n#\n# 3D crustal models:\n# crust1.0, crust2.0, EPcrust, EuCRUST, crustmaps, crustSH\n#\n# Mars models:\n# 1D_Sohl, 1D_Sohl_3D_crust, 1D_case65TAY, 1D_case65TAY_3D_crust\n#\n# Moon models:\n# vpremoon\n#\n# 3D models with 3D crust: append \"_**crustname**\" to the mantle model name\n#                          to take a 3D crustal model (by default crust2.0 is taken for 3D mantle models)\n#                          e.g. s20rts_crust1.0, s362ani_crustmaps, full_sh_crustSH, sglobe_EPcrust, etc.\n#\n# 3D models with 1D crust: append \"_1Dcrust\" to the 3D model name\n#                          to take the 1D crustal model from the\n#                          associated reference model rather than the default 3D crustal model\n#                          e.g. s20rts_1Dcrust, s362ani_1Dcrust, etc.\n#\nMODEL                           = s362ani_crust1.0\n\n# parameters describing the Earth model\nOCEANS                          = .true.\nELLIPTICITY                     = .true.\nTOPOGRAPHY                      = .true.\nGRAVITY                         = .true.\nROTATION                        = .true.\nATTENUATION                     = .true.\n\n# absorbing boundary conditions for a regional simulation\nABSORBING_CONDITIONS            = .true.\n\n# run global simulation for a circular region and apply high attenuation for the rest of the model\n# this creates an absorbing boundary with less reflection than stacey at a cost of 6x the computational cost\n# NCHUNKS must be set to 6 to enable this flag\nABSORB_USING_GLOBAL_SPONGE      = .false.\n\n# location and size of the region with no sponge (the region to run simulation)\nSPONGE_LATITUDE_IN_DEGREES      = 40.d0\nSPONGE_LONGITUDE_IN_DEGREES     = 25.d0\nSPONGE_RADIUS_IN_DEGREES        = 25.d0\n\n# record length in minutes\nRECORD_LENGTH_IN_MINUTES        = 3.0d0\n\n# to undo attenuation for sensitivity kernel calculations or forward runs with SAVE_FORWARD\n# use one (and only one) of the two flags below. UNDO_ATTENUATION is much better (it is exact)\n# but requires a significant amount of disk space for temporary storage.\nPARTIAL_PHYS_DISPERSION_ONLY    = .false.\nUNDO_ATTENUATION                = .true.\n# How much memory (in GB) is installed on your machine per CPU core (only used for UNDO_ATTENUATION, can be ignored otherwise)\n#         (or per GPU card or per INTEL MIC Phi board)\n#   Beware, this value MUST be given per core, i.e. per MPI thread, i.e. per MPI rank, NOT per node.\n#   This value is for instance:\n#   -  4 GB on Tiger at Princeton\n#   -  4 GB on TGCC Curie in Paris\n#   -  4 GB on Titan at ORNL when using CPUs only (no GPUs); start your run with \"aprun -n$NPROC -N8 -S4 -j1\"\n#   -  2 GB on the machine used by Christina Morency\n#   -  2 GB on the TACC machine used by Min Chen\n#   -  1.5 GB on the GPU cluster in Marseille\n# When running on GPU machines, it is simpler to set PERCENT_OF_MEM_TO_USE_PER_CORE = 100.d0\n# and then set MEMORY_INSTALLED_PER_CORE_IN_GB to the amount of memory that you estimate is free (rather than installed)\n# on the host of the GPU card while running your GPU job.\n# For GPU runs on Titan at ORNL, use PERCENT_OF_MEM_TO_USE_PER_CORE = 100.d0 and MEMORY_INSTALLED_PER_CORE_IN_GB = 25.d0\n# and run your job with \"aprun -n$NPROC -N1 -S1 -j1\"\n# (each host has 32 GB on Titan, each GPU has 6 GB, thus even if all the GPU arrays are duplicated on the host\n#  this leaves 32 - 6 = 26 GB free on the host; leaving 1 GB for the Linux system, we can safely use 100% of 25 GB)\nMEMORY_INSTALLED_PER_CORE_IN_GB = 4.d0\n# What percentage of this total do you allow us to use for arrays to undo attenuation, keeping in mind that you\n# need to leave some memory available for the GNU/Linux system to run\n#   (a typical value is 85%; any value below is fine but the code will then save a lot of data to disk;\n#    values above, say 90% or 92%, can be OK on some systems but can make the adjoint code run out of memory\n#    on other systems, depending on how much memory per node the GNU/Linux system needs for itself; thus you can try\n#    a higher value and if the adjoint crashes then try again with a lower value)\nPERCENT_OF_MEM_TO_USE_PER_CORE  = 85.d0\n\n# three mass matrices instead of one are needed to handle rotation very accurately;\n# otherwise rotation is handled slightly less accurately (but still reasonably well);\n# set to .true. if you are interested in precise effects related to rotation;\n# set to .false. if you are solving very large inverse problems at high frequency and also undoing attenuation exactly\n# using the UNDO_ATTENUATION flag above, in which case saving as much memory as possible can be a good idea.\n# You can also safely set it to .false. if you are not in a period range in which rotation matters, e.g. if you are targetting very short-period body waves.\n# if in doubt, set to .true.\n# Set it to .true. if you have ABSORBING_CONDITIONS above, because in that case the code will use the three mass matrices anyway\n# and thus there is no additional cost.\n# this flag is of course unused if ROTATION above is set to .false.\nEXACT_MASS_MATRIX_FOR_ROTATION  = .true.\n\n#-----------------------------------------------------------\n\n# this for LDDRK high-order time scheme instead of Newmark\nUSE_LDDRK                       = .false.\n\n# the maximum CFL of LDDRK is significantly higher than that of the Newmark scheme,\n# in a ratio that is theoretically 1.327 / 0.697 = 1.15 / 0.604 = 1.903 for a solid with Poisson's ratio = 0.25\n# and for a fluid (see the manual of the 2D code, SPECFEM2D, Tables 4.1 and 4.2, and that ratio does not\n# depend on whether we are in 2D or in 3D). However in practice a ratio of about 1.5 to 1.7 is often safer\n# (for instance for models with a large range of Poisson's ratio values).\n# Since the code computes the time step using the Newmark scheme, for LDDRK we will simply\n# multiply that time step by this ratio when LDDRK is on and when flag INCREASE_CFL_FOR_LDDRK is true.\nINCREASE_CFL_FOR_LDDRK          = .true.\nRATIO_BY_WHICH_TO_INCREASE_IT   = 1.5d0\n\n#-----------------------------------------------------------\n#\n# Visualization\n#\n#-----------------------------------------------------------\n\n# save AVS or OpenDX movies\n#MOVIE_COARSE saves movie only at corners of elements (SURFACE OR VOLUME)\n#MOVIE_COARSE does not work with create_movie_AVS_DX\nMOVIE_SURFACE                   = .false.\nMOVIE_VOLUME                    = .false.\nMOVIE_COARSE                    = .true.\nNTSTEP_BETWEEN_FRAMES           = 50\nHDUR_MOVIE                      = 0.d0\n\n# save movie in volume.  Will save element if center of element is in prescribed volume\n# top/bottom: depth in KM, use MOVIE_TOP = -100 to make sure the surface is stored.\n# west/east: longitude, degrees East [-180/180] top/bottom: latitute, degrees North [-90/90]\n# start/stop: frames will be stored at MOVIE_START + i*NSTEP_BETWEEN_FRAMES, where i=(0,1,2..) and iNSTEP_BETWEEN_FRAMES <= MOVIE_STOP\n# movie_volume_type: 1=strain, 2=time integral of strain, 3=\\mu*time integral of strain\n# type 4 saves the trace and deviatoric stress in the whole volume, 5=displacement, 6=velocity\nMOVIE_VOLUME_TYPE               = 2\nMOVIE_TOP_KM                    = -100.0\nMOVIE_BOTTOM_KM                 = 1000.0\nMOVIE_WEST_DEG                  = -90.0\nMOVIE_EAST_DEG                  = 90.0\nMOVIE_NORTH_DEG                 = 90.0\nMOVIE_SOUTH_DEG                 = -90.0\nMOVIE_START                     = 0\nMOVIE_STOP                      = 40000\n\n# save mesh files to check the mesh\nSAVE_MESH_FILES                 = .true.\n\n# restart files (number of runs can be 1 or higher, choose 1 for no restart files)\nNUMBER_OF_RUNS                  = 1\nNUMBER_OF_THIS_RUN              = 1\n\n# path to store the local database files on each node\nLOCAL_PATH                      = ./DATABASES_MPI\n# temporary wavefield/kernel/movie files\nLOCAL_TMP_PATH                  = ./DATABASES_MPI\n\n# interval at which we output time step info and max of norm of displacement\nNTSTEP_BETWEEN_OUTPUT_INFO      = 500\n\n#-----------------------------------------------------------\n#\n# Sources & seismograms\n#\n#-----------------------------------------------------------\n\n# interval in time steps for temporary writing of seismograms\nNTSTEP_BETWEEN_OUTPUT_SEISMOS   = 5000000\nNTSTEP_BETWEEN_READ_ADJSRC      = 1000\n\n# use a (tilted) FORCESOLUTION force point source (or several) instead of a CMTSOLUTION moment-tensor source.\n# This can be useful e.g. for asteroid simulations\n# in which the source is a vertical force, normal force, tilted force, impact etc.\n# If this flag is turned on, the FORCESOLUTION file must be edited by giving:\n# - the corresponding time-shift parameter,\n# - the half duration parameter of the source,\n# - the coordinates of the source,\n# - the source time function of the source,\n# - the magnitude of the force source,\n# - the components of a (non necessarily unitary) direction vector for the force source in the E/N/Z_UP basis.\n# The direction vector is made unitary internally in the code and thus only its direction matters here;\n# its norm is ignored and the norm of the force used is the factor force source times the source time function.\nUSE_FORCE_POINT_SOURCE          = .false.\n\n# use monochromatic source time function for CMTSOLUTION moment-tensor source.\n# half duration is interpreted as a PERIOD just to avoid changing CMTSOLUTION file format\n# default is .false. which uses Heaviside function\nUSE_MONOCHROMATIC_CMT_SOURCE    = .false.\n\n# option to save strain seismograms\n# this option is useful for strain Green's tensor\n# this feature is currently under development\nSAVE_SEISMOGRAMS_STRAIN         = .false.\n\n# save seismograms also when running the adjoint runs for an inverse problem\n# (usually they are unused and not very meaningful, leave this off in almost all cases)\nSAVE_SEISMOGRAMS_IN_ADJOINT_RUN = .false.\n\n# output format for the seismograms (one can use either or all of the three formats)\nOUTPUT_SEISMOS_ASCII_TEXT       = .false.\nOUTPUT_SEISMOS_SAC_ALPHANUM     = .false.\nOUTPUT_SEISMOS_SAC_BINARY       = .false.\nOUTPUT_SEISMOS_ASDF             = .true.\n\n# rotate seismograms to Radial-Transverse-Z or use default North-East-Z reference frame\nROTATE_SEISMOGRAMS_RT           = .true.\n\n# decide if main process writes all the seismograms or if all processes do it in parallel\nWRITE_SEISMOGRAMS_BY_MAIN       = .false.\n\n# save all seismograms in one large combined file instead of one file per seismogram\n# to avoid overloading shared non-local file systems such as LUSTRE or GPFS for instance\nSAVE_ALL_SEISMOS_IN_ONE_FILE    = .false.\nUSE_BINARY_FOR_LARGE_FILE       = .false.\n\n# flag to impose receivers at the surface or allow them to be buried\nRECEIVERS_CAN_BE_BURIED         = .true.\n\n# print source time function\nPRINT_SOURCE_TIME_FUNCTION      = .false.\n\n#-----------------------------------------------------------\n#\n#  Adjoint kernel outputs\n#\n#-----------------------------------------------------------\n\n# use ASDF format for reading the adjoint sources\nREAD_ADJSRC_ASDF                = .true.\n\n# this parameter must be set to .true. to compute anisotropic kernels\n# in crust and mantle (related to the 21 Cij in geographical coordinates)\n# default is .false. to compute isotropic kernels (related to alpha and beta)\nANISOTROPIC_KL                  = .true.\n\n# output only transverse isotropic kernels (alpha_v,alpha_h,beta_v,beta_h,eta,rho)\n# rather than fully anisotropic kernels when ANISOTROPIC_KL above is set to .true.\n# means to save radial anisotropic kernels, i.e., sensitivity kernels for beta_v, beta_h, etc.\nSAVE_TRANSVERSE_KL_ONLY         = .true.\n\n# output only the kernels used for the current azimuthally anisotropic inversions of surface waves,\n# i.e., bulk_c, bulk_betav, bulk_betah, eta, Gc_prime, Gs_prime and rho\n# (Gc' & Gs' which are the normalized Gc & Gs kernels by isotropic \\rho\\beta of the 1D reference model)\nSAVE_AZIMUTHAL_ANISO_KL_ONLY    = .false.\n\n# output approximate Hessian in crust mantle region.\n# means to save the preconditioning for gradients, they are cross correlations between forward and adjoint accelerations.\nAPPROXIMATE_HESS_KL             = .true.\n\n# forces transverse isotropy for all mantle elements\n# (default is to use transverse isotropy only between crust and 220)\n# means we allow radial anisotropy throughout the whole crust/mantle region\nUSE_FULL_TISO_MANTLE            = .false.\n\n# output kernel mask to zero out source region\n# to remove large values near the sources in the sensitivity kernels\nSAVE_SOURCE_MASK                = .true.\n\n# output kernels on a regular grid instead of on the GLL mesh points (a bit expensive)\nSAVE_REGULAR_KL                 = .false.\n\n# compute steady state kernels for source encoding\nSTEADY_STATE_KERNEL             = .false.\nSTEADY_STATE_LENGTH_IN_MINUTES  = 0.d0\n\n#-----------------------------------------------------------\n\n# Dimitri Komatitsch, July 2014, CNRS Marseille, France:\n# added the ability to run several calculations (several earthquakes)\n# in an embarrassingly-parallel fashion from within the same run;\n# this can be useful when using a very large supercomputer to compute\n# many earthquakes in a catalog, in which case it can be better from\n# a batch job submission point of view to start fewer and much larger jobs,\n# each of them computing several earthquakes in parallel.\n# To turn that option on, set parameter NUMBER_OF_SIMULTANEOUS_RUNS to a value greater than 1.\n# To implement that, we create NUMBER_OF_SIMULTANEOUS_RUNS MPI sub-communicators,\n# each of them being labeled \"my_local_mpi_comm_world\", and we use them\n# in all the routines in \"src/shared/parallel.f90\", except in MPI_ABORT() because in that case\n# we need to kill the entire run.\n# When that option is on, of course the number of processor cores used to start\n# the code in the batch system must be a multiple of NUMBER_OF_SIMULTANEOUS_RUNS,\n# all the individual runs must use the same number of processor cores,\n# which as usual is NPROC in the Par_file,\n# and thus the total number of processor cores to request from the batch system\n# should be NUMBER_OF_SIMULTANEOUS_RUNS * NPROC.\n# All the runs to perform must be placed in directories called run0001, run0002, run0003 and so on\n# (with exactly four digits).\n#\n# Imagine you have 10 independent calculations to do, each of them on 100 cores; you have three options:\n#\n# 1/ submit 10 jobs to the batch system\n#\n# 2/ submit a single job on 1000 cores to the batch, and in that script create a sub-array of jobs to start 10 jobs,\n# each running on 100 cores (see e.g. http://www.schedmd.com/slurmdocs/job_array.html )\n#\n# 3/ submit a single job on 1000 cores to the batch, start SPECFEM3D on 1000 cores, create 10 sub-communicators,\n# cd into one of 10 subdirectories (called e.g. run0001, run0002,... run0010) depending on the sub-communicator\n# your MPI rank belongs to, and run normally on 100 cores using that sub-communicator.\n#\n# The option below implements 3/.\n#\nNUMBER_OF_SIMULTANEOUS_RUNS     = 1\n\n# if we perform simultaneous runs in parallel, if only the source and receivers vary between these runs\n# but not the mesh nor the model (velocity and density) then we can also read the mesh and model files\n# from a single run in the beginning and broadcast them to all the others; for a large number of simultaneous\n# runs for instance when solving inverse problems iteratively this can DRASTICALLY reduce I/Os to disk in the solver\n# (by a factor equal to NUMBER_OF_SIMULTANEOUS_RUNS), and reducing I/Os is crucial in the case of huge runs.\n# Thus, always set this option to .true. if the mesh and the model are the same for all simultaneous runs.\n# In that case there is no need to duplicate the mesh and model file database (the content of the DATABASES_MPI\n# directories) in each of the run0001, run0002,... directories, it is sufficient to have one in run0001\n# and the code will broadcast it to the others)\nBROADCAST_SAME_MESH_AND_MODEL   = .false.\n\n#-----------------------------------------------------------\n\n# set to true to use GPUs\nGPU_MODE                        = .false.\n# Only used if GPU_MODE = .true. :\nGPU_RUNTIME                     = 1\n# 2 (OpenCL), 1 (Cuda) ou 0 (Compile-time -- does not work if configured with --with-cuda *AND* --with-opencl)\nGPU_PLATFORM                    = NVIDIA\nGPU_DEVICE                      = Tesla\n\n# set to true to use the ADIOS library for I/Os\nADIOS_ENABLED                   = .true.\nADIOS_FOR_FORWARD_ARRAYS        = .true.\nADIOS_FOR_MPI_ARRAYS            = .true.\nADIOS_FOR_ARRAYS_SOLVER         = .true.\nADIOS_FOR_SOLVER_MESHFILES      = .true.\nADIOS_FOR_AVS_DX                = .true.\nADIOS_FOR_KERNELS               = .true.\nADIOS_FOR_MODELS                = .true.\nADIOS_FOR_UNDO_ATTENUATION      = .true."]],"language":[["Plain Text"]]},"created_time":1619141140949,"last_edited_time":1619141160000,"parent_id":"285c4017-568b-4f63-bb1a-1c0bd0a9a709","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","last_edited_by_table":"notion_user","last_edited_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","space_id":"05f80ef1-fcad-4982-9333-06f8429a89d1"}},"993533ba-0d27-460e-8dd5-d6c03cba1215":{"role":"reader","value":{"id":"993533ba-0d27-460e-8dd5-d6c03cba1215","version":17,"type":"text","created_time":1619141160000,"last_edited_time":1619141160000,"parent_id":"285c4017-568b-4f63-bb1a-1c0bd0a9a709","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","last_edited_by_table":"notion_user","last_edited_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","space_id":"05f80ef1-fcad-4982-9333-06f8429a89d1"}},"8f9b5132-6ab3-4e1f-8baa-928a1a9d6566":{"role":"reader","value":{"id":"8f9b5132-6ab3-4e1f-8baa-928a1a9d6566","version":240,"type":"text","properties":{"title":[["To use ASDF, we should let the program output ASDF seismograms and read ASDF adjoint sources. For ADIOS, we should set ADIOS_ENABLED to be true."]]},"created_time":1619141160000,"last_edited_time":1619141280000,"parent_id":"285c4017-568b-4f63-bb1a-1c0bd0a9a709","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","last_edited_by_table":"notion_user","last_edited_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","space_id":"05f80ef1-fcad-4982-9333-06f8429a89d1"}},"5df7a574-6b7d-432d-9ba0-5dae16baf122":{"role":"reader","value":{"id":"5df7a574-6b7d-432d-9ba0-5dae16baf122","version":239,"type":"text","properties":{"title":[["In previous blogs, I have talked about the compilation of asdf_library and ADIOS2. In the root directory of Specfem, firstly we should configure the project."]]},"created_time":1619141280000,"last_edited_time":1619141340000,"parent_id":"285c4017-568b-4f63-bb1a-1c0bd0a9a709","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","last_edited_by_table":"notion_user","last_edited_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","space_id":"05f80ef1-fcad-4982-9333-06f8429a89d1"}},"6a13d886-86d7-43bd-9a96-f26b0221fdd7":{"role":"reader","value":{"id":"6a13d886-86d7-43bd-9a96-f26b0221fdd7","version":63,"type":"code","properties":{"title":[["module load phdf5/1.10.4 # not necessary, but required in running code?\n./configure FC=ifort CC=icc MPIFC=mpif90 --with-asdf ASDF_LIBS=\"-L/scratch/05880/tg851791/libs/asdf/lib64 -L/opt/apps/intel18/impi18_0/phdf5/1.10.4/x86_64/lib\" --with-adios2 ADIOS2_CONFIG=/scratch/05880/tg851791/libs/adios2/bin/adios2-config"]],"language":[["Shell"]]},"created_time":1619141394266,"last_edited_time":1619141400000,"parent_id":"285c4017-568b-4f63-bb1a-1c0bd0a9a709","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","last_edited_by_table":"notion_user","last_edited_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","space_id":"05f80ef1-fcad-4982-9333-06f8429a89d1"}},"9724776f-62ef-4531-9fd6-7bf869b2325a":{"role":"reader","value":{"id":"9724776f-62ef-4531-9fd6-7bf869b2325a","version":270,"type":"text","properties":{"title":[["Here ASDF_LIBS contains the directory path of ASDF lib, i.e. libasdf.a , and the library path of HDF5 (can be obtained from echo $LD_LIBRARY_PATH after loading the phdf5 module). We also need to set the path of adios2-config."]]},"created_time":1619141400000,"last_edited_time":1619141580000,"parent_id":"285c4017-568b-4f63-bb1a-1c0bd0a9a709","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","last_edited_by_table":"notion_user","last_edited_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","space_id":"05f80ef1-fcad-4982-9333-06f8429a89d1"}},"519d807a-7f11-4326-9a32-b5a601626a29":{"role":"reader","value":{"id":"519d807a-7f11-4326-9a32-b5a601626a29","version":17,"type":"text","created_time":1619131140000,"last_edited_time":1619131140000,"parent_id":"ed4ff7cf-35db-46fd-ba49-04e7b76b047c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","last_edited_by_table":"notion_user","last_edited_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","space_id":"05f80ef1-fcad-4982-9333-06f8429a89d1"}},"b5965324-01d0-4e17-828b-c7a179b14506":{"role":"reader","value":{"id":"b5965324-01d0-4e17-828b-c7a179b14506","version":38,"type":"text","properties":{"title":[["After modifying CMakeLists.txt, we can run:"]]},"created_time":1619131140000,"last_edited_time":1619131140000,"parent_id":"ed4ff7cf-35db-46fd-ba49-04e7b76b047c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","last_edited_by_table":"notion_user","last_edited_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","space_id":"05f80ef1-fcad-4982-9333-06f8429a89d1"}},"af6d7a91-5352-4d85-8837-9fa9b9b63a00":{"role":"reader","value":{"id":"af6d7a91-5352-4d85-8837-9fa9b9b63a00","version":15,"type":"text","properties":{"title":[[" "]]},"created_time":1619131140000,"last_edited_time":1619131140000,"parent_id":"ed4ff7cf-35db-46fd-ba49-04e7b76b047c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","last_edited_by_table":"notion_user","last_edited_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","space_id":"05f80ef1-fcad-4982-9333-06f8429a89d1"}},"a8435c8e-7f81-4d0d-a01a-21ab89312570":{"role":"reader","value":{"id":"a8435c8e-7f81-4d0d-a01a-21ab89312570","version":87,"type":"text","properties":{"title":[["After configuring, the next step is to compile the code, just run:"]]},"created_time":1619141580000,"last_edited_time":1619141580000,"parent_id":"285c4017-568b-4f63-bb1a-1c0bd0a9a709","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","last_edited_by_table":"notion_user","last_edited_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","space_id":"05f80ef1-fcad-4982-9333-06f8429a89d1"}},"0d143ccf-8309-470d-8d79-b58279e575b0":{"role":"reader","value":{"id":"0d143ccf-8309-470d-8d79-b58279e575b0","version":20,"type":"code","properties":{"title":[["make -j 48"]],"language":[["Shell"]]},"created_time":1619141642222,"last_edited_time":1619141640000,"parent_id":"285c4017-568b-4f63-bb1a-1c0bd0a9a709","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","last_edited_by_table":"notion_user","last_edited_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","space_id":"05f80ef1-fcad-4982-9333-06f8429a89d1"}},"ce4c5ec4-5d16-486e-9547-c76c4259f621":{"role":"reader","value":{"id":"ce4c5ec4-5d16-486e-9547-c76c4259f621","version":15,"type":"text","created_time":1619140560000,"last_edited_time":1619140560000,"parent_id":"bf5005e7-7d64-4ee9-a362-1a53a404918b","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","last_edited_by_table":"notion_user","last_edited_by_id":"0d58f417-30df-4d6c-b3b9-191c93ad0a1e","space_id":"05f80ef1-fcad-4982-9333-06f8429a89d1"}}},"space":{},"collection_view":{"34dde640-d6fc-4b58-951a-686c32a9031d":{"role":"reader","value":{"id":"34dde640-d6fc-4b58-951a-686c32a9031d","version":39,"type":"table","name":"Default view","format":{"table_wrap":true,"table_properties":[{"width":269,"visible":true,"property":"title"},{"width":100,"visible":true,"property":"|o[w"},{"width":270,"visible":true,"property":"BpIl"},{"width":202,"visible":true,"property":"J@xT"}]},"parent_id":"20dbf2b0-c90c-4d30-9f41-0abd48835ad0","parent_table":"block","alive":true,"page_sort":["7b868910-8732-4b19-a22b-85ccd35cecdd","ed4ff7cf-35db-46fd-ba49-04e7b76b047c","bf5005e7-7d64-4ee9-a362-1a53a404918b","285c4017-568b-4f63-bb1a-1c0bd0a9a709","9624cbbe-068b-4fc0-ae9f-1d91629339a0","a57b5a1b-81aa-4a65-931a-2159f3344a69","22f2c28f-ec70-4e30-9055-9a2fe764f2d7","c3853aff-1d78-4a75-9970-d4cf53cf26b2"],"query2":{"aggregations":[{"property":"title","aggregator":"count"}]},"space_id":"05f80ef1-fcad-4982-9333-06f8429a89d1"}}},"collection":{"64d14807-6d76-4cab-808b-1ac3a358dcbb":{"role":"reader","value":{"id":"64d14807-6d76-4cab-808b-1ac3a358dcbb","version":25,"name":[["2021"]],"schema":{"BpIl":{"name":"Tags","type":"multi_select","options":[{"id":"98a78b5f-f6ea-4b8f-bb3b-49bd3761bdae","color":"brown","value":"front end"},{"id":"3e797377-43a5-442d-a079-650b0123fe0a","color":"pink","value":"typescript"},{"id":"7b9b6115-96d5-40f2-b04f-74f7be002947","color":"orange","value":"next.js"},{"id":"45d8b453-1a5e-4405-8bd5-7d081cdc7a6c","color":"blue","value":"specfem"},{"id":"bc880b7a-5143-4c98-8f80-9f5a9570d2d9","color":"gray","value":"stampede2"},{"id":"7c35f5e1-7372-4f8e-93e0-bb74a5c3fa5d","color":"yellow","value":"cmake"}]},"J@xT":{"name":"Last edited time","type":"last_edited_time"},"|o[w":{"name":"Category","type":"select","options":[{"id":"ThgN","value":"CS"},{"id":"6134b7ea-a30a-41e5-8bbd-1731a91ee334","color":"gray","value":"Specfem"}]},"title":{"name":"Name","type":"title"}},"format":{"collection_page_properties":[{"visible":true,"property":"BpIl"}]},"parent_id":"20dbf2b0-c90c-4d30-9f41-0abd48835ad0","parent_table":"block","alive":true,"migrated":true,"space_id":"05f80ef1-fcad-4982-9333-06f8429a89d1"}}},"notion_user":{},"collection_query":{"64d14807-6d76-4cab-808b-1ac3a358dcbb":{"34dde640-d6fc-4b58-951a-686c32a9031d":{"type":"table","blockIds":["7b868910-8732-4b19-a22b-85ccd35cecdd","ed4ff7cf-35db-46fd-ba49-04e7b76b047c","bf5005e7-7d64-4ee9-a362-1a53a404918b","285c4017-568b-4f63-bb1a-1c0bd0a9a709"],"aggregationResults":[{"type":"number","value":4}],"total":4}}},"signed_urls":{}}},"__N_SSG":true}